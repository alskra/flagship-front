include /components/table-data/table-data

mixin stage(type = 'cabinet')
  .stage(
    class=`stage--${type}`
  )&attributes(attributes)
    .stage__body
      .stage__header
        h1.h1.content.stage__title
          if type === 'cabinet'
            | Этап кабинет
        +btn({ tag: 'a', content: 'Далее', icons: ['arrow-right'] }).stage__btn-next(href="")

      .stage__main
        if type === 'cabinet'
          .stage__params(x-data="stageParams")
            .stage__params-body(x-data="timer")
              div
                +form-field({ tag: 'select' }).form-field--lg(x-model.number="controlTime")
                  option(value=5 * 60 * 1000) 5 мин.
                  option(value=15 * 60 * 1000) 15 мин.
                  option(value=30 * 60 * 1000) 30 мин.
                  option(value=45 * 60 * 1000) 45 мин.
                  option(value=60 * 60 * 1000) 1 час
              div
                +btn({ content: 'Старт' }).btn--accent.btn--lg.btn--width-full(
                  x-bind:disabled="loading"
                  x-on:click="loading = true; fakeSendData().then(() => { loading = false; start() })"
                )
              div
                +form-field().form-field.form-field--lg.form-field--timer(
                  readonly
                  x-bind:value="formatTime"
                )

          +table-data(type)
        block
